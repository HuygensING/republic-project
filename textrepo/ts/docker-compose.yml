version: '3'

services:

  pim-tr-importer:
    container_name: importer
    build: .
    volumes:
      - ./types.csv:/pim-tr-import/types.csv
      - ./external-identifiers-all-210329.csv:/pim-tr-import/external-identifiers.csv
    environment:
      GOOGLE_AUTHORIZATION: ${GOOGLE_AUTHORIZATION}
      NODE_OPTIONS: '--max_old_space_size=4096'
      PIM: 'https://images.diginfra.net'
      SUBSET_CSV: './external-identifiers.csv'
      TMP: './tmp'
      TR: 'localhost:8080/textrepo'
      TYPE_CSV: './types.csv'
      CACHE: 250
    command: npm run create-all
    networks:
      - textrepo_network

networks:
  textrepo_network:
    external:
      name: pim-tr-import-install_textrepo_network
